{% extends 'tech-articles/dashboard/pages/_page_base.html' %}
{% load i18n %}

{% block page_title %}{% translate 'Edit Subscriber' %}{% endblock %}

{% block content %}
  <div class="space-y-6">
    <!-- Header -->
    <div class="flex items-center gap-4">
      <a href="{% url 'newsletter:admin_detail' subscriber.id %}" class="text-gray-400 hover:text-white">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
        </svg>
      </a>
      <div>
        <h1 class="text-2xl font-bold text-white">{% trans "Edit Subscriber" %}</h1>
        <p class="text-gray-400 text-sm mt-1">{{ subscriber.email }}</p>
      </div>
    </div>

    <!-- Edit Form -->
    <div class="dashboard-card max-w-2xl">
      <form method="post" class="space-y-6">
        {% csrf_token %}

        <!-- Non-field errors -->
        {% if form.non_field_errors %}
          <div class="bg-red-500/10 border border-red-500/30 text-red-400 px-4 py-3 rounded-lg text-sm">
            {{ form.non_field_errors }}
          </div>
        {% endif %}

        <!-- Email -->
        <div class="form-group">
          <label for="{{ form.email.id_for_label }}" class="form-label">
            {{ form.email.label }}
          </label>
          {{ form.email }}
          {% if form.email.errors %}
            <p class="form-error">{{ form.email.errors.0 }}</p>
          {% endif %}
        </div>

        <!-- Language -->
        <div class="form-group">
          <label for="{{ form.language.id_for_label }}" class="form-label">
            {{ form.language.label }}
          </label>
          {{ form.language }}
          {% if form.language.errors %}
            <p class="form-error">{{ form.language.errors.0 }}</p>
          {% endif %}
        </div>

        <!-- Status -->
        <div class="form-group">
          <label for="{{ form.status.id_for_label }}" class="form-label">
            {{ form.status.label }}
          </label>
          {{ form.status }}
          {% if form.status.errors %}
            <p class="form-error">{{ form.status.errors.0 }}</p>
          {% endif %}
        </div>

        <!-- Checkboxes -->
        <div class="space-y-3">
          <div class="flex items-center">
            {{ form.is_active }}
            <label for="{{ form.is_active.id_for_label }}" class="ml-2 text-gray-300">
              {{ form.is_active.label }}
            </label>
          </div>
          {% if form.is_active.errors %}
            <p class="form-error">{{ form.is_active.errors.0 }}</p>
          {% endif %}

          <div class="flex items-center">
            {{ form.is_confirmed }}
            <label for="{{ form.is_confirmed.id_for_label }}" class="ml-2 text-gray-300">
              {{ form.is_confirmed.label }}
            </label>
          </div>
          {% if form.is_confirmed.errors %}
            <p class="form-error">{{ form.is_confirmed.errors.0 }}</p>
          {% endif %}
        </div>

        <!-- Actions -->
        <div class="flex gap-3">
          <button type="submit" class="btn-primary">
            {% trans "Save Changes" %}
          </button>
          <a href="{% url 'newsletter:admin_detail' subscriber.id %}" class="btn-secondary">
            {% trans "Cancel" %}
          </a>
        </div>
      </form>
    </div>
  </div>
{% endblock %}

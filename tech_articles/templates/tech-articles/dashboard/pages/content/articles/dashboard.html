{% load static %}
{% load i18n %}
<!DOCTYPE html>
<html lang="{{ request.LANGUAGE_CODE|default:'en' }}" class="h-full">
{% include "tech-articles/dashboard/includes/_head.html" %}
<body class="h-full flex flex-col bg-background text-text-primary">
{% include 'tech-articles/dashboard/includes/_preloader.html' %}

<div class="flex flex-col h-screen overflow-hidden w-full">
  <!-- Simplified Navbar -->
  <header class="sticky top-0 z-99999 flex w-full border-border-dark bg-surface-dark border-b">
    <div class="flex grow items-center justify-between px-4 py-3 lg:px-6">
      <!-- Left: Back Button -->
      <a href="{% url 'content:articles_list' %}" class="inline-flex items-center gap-2 text-text-secondary hover:text-primary transition-colors">
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
        </svg>
        <span class="text-sm font-medium">{% translate "Back to Articles" %}</span>
      </a>

      <!-- Center: Article Title -->
      <h1 class="hidden sm:block text-text-primary font-semibold truncate max-w-md">{{ article.title }}</h1>

      <!-- Right: Profile Dropdown -->
      <div class="relative">
        <button id="profile-btn" class="flex items-center text-text-primary hover:text-white transition-colors duration-200">
          <span class="mr-2 h-10 w-10 overflow-hidden rounded-full ring-2 ring-border-dark flex items-center justify-center">
            {% static 'images/users/default_profile_picture.png' as default_profile %}
            <img src="{{ request.user.get_profile_picture_url|default:default_profile }}" class="h-8 w-8 rounded-full" alt="" id="nav-bar-img"/>
          </span>
          <svg class="stroke-text-secondary w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
          </svg>
        </button>

        <!-- Dropdown -->
        <div id="profile-dropdown" class="shadow-lg absolute right-0 mt-2 flex w-[200px] flex-col rounded-xl border border-border-dark bg-surface-dark p-2 hidden">
          <div class="px-3 py-2 border-b border-border-dark mb-2">
            <span class="text-sm block font-medium text-text-primary truncate">{{ request.user.name|default:"" }}</span>
            <span class="text-xs block text-text-secondary truncate">{{ request.user.email }}</span>
          </div>
          <a href="{% url 'common:home' %}" class="text-sm flex items-center gap-2 rounded-lg px-3 py-2 text-text-secondary hover:bg-surface-light hover:text-white transition-colors">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m4 12 8-8 8 8M6 10.5V19a1 1 0 0 0 1 1h3v-3a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v3h3a1 1 0 0 0 1-1v-8.5"></path>
            </svg>
            {% translate "Back to Home" %}
          </a>
          <form action="{% url 'accounts:account_logout' %}" method="post" class="w-full">
            {% csrf_token %}
            <button type="submit" class="text-sm flex items-center gap-2 rounded-lg px-3 py-2 text-text-secondary hover:bg-surface-light hover:text-white w-full text-start transition-colors">
              <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path>
              </svg>
              {% translate "Sign out" %}
            </button>
          </form>
        </div>
      </div>
    </div>
  </header>

  <!-- Main Content Area -->
  <div class="flex flex-1 overflow-hidden">
    <!-- Sidebar Navigation (Desktop) - Vertical Pills -->
    <nav class="hidden lg:flex flex-col w-64 bg-surface-dark border-r border-border-dark p-4">
      <div class="mb-6">
        <h2 class="text-xs uppercase tracking-wider text-text-muted font-semibold mb-3">{% translate "Article Management" %}</h2>
      </div>
      <ul class="space-y-1">
        <li>
          <a href="?tab=details" class="flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium transition-all duration-200 {% if active_tab == 'details' %}bg-primary/10 text-primary border border-primary/20{% else %}text-text-secondary hover:bg-surface-light hover:text-text-primary{% endif %}">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
            </svg>
            {% translate "Article Details" %}
          </a>
        </li>
        <li>
          <a href="?tab=seo" class="flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium transition-all duration-200 {% if active_tab == 'seo' %}bg-primary/10 text-primary border border-primary/20{% else %}text-text-secondary hover:bg-surface-light hover:text-text-primary{% endif %}">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
            </svg>
            {% translate "SEO" %}
          </a>
        </li>
        <li>
          <a href="?tab=pricing" class="flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium transition-all duration-200 {% if active_tab == 'pricing' %}bg-primary/10 text-primary border border-primary/20{% else %}text-text-secondary hover:bg-surface-light hover:text-text-primary{% endif %}">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
            {% translate "Pricing" %}
          </a>
        </li>
        <li>
          <a href="?tab=pages" class="flex items-center gap-3 px-4 py-3 rounded-xl text-sm font-medium transition-all duration-200 {% if active_tab == 'pages' %}bg-primary/10 text-primary border border-primary/20{% else %}text-text-secondary hover:bg-surface-light hover:text-text-primary{% endif %}">
            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
            </svg>
            {% translate "Pages" %}
            <span class="ml-auto bg-surface-light text-text-muted text-xs px-2 py-0.5 rounded-full">{{ pages.count }}</span>
          </a>
        </li>
      </ul>

      <!-- Article Info -->
      <div class="mt-auto pt-6 border-t border-border-dark">
        <div class="text-xs text-text-muted space-y-2">
          <div class="flex justify-between">
            <span>{% translate "Status" %}</span>
            <span class="{% if article.status == 'published' %}text-green-500{% elif article.status == 'draft' %}text-yellow-500{% else %}text-text-secondary{% endif %} font-medium">
              {{ article.get_status_display }}
            </span>
          </div>
          <div class="flex justify-between">
            <span>{% translate "Created" %}</span>
            <span class="text-text-secondary">{{ article.created_at|date:"M d, Y" }}</span>
          </div>
          <div class="flex justify-between">
            <span>{% translate "Updated" %}</span>
            <span class="text-text-secondary">{{ article.updated_at|date:"M d, Y" }}</span>
          </div>
        </div>
      </div>
    </nav>

    <!-- Mobile Tab Navigation - Horizontal Pills -->
    <div class="lg:hidden w-full bg-surface-dark border-b border-border-dark sticky top-0 z-50">
      <div class="flex overflow-x-auto px-4 py-2 gap-2 scrollbar-hide">
        <a href="?tab=details" class="flex-shrink-0 inline-flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium transition-all duration-200 {% if active_tab == 'details' %}bg-primary text-white{% else %}bg-surface-light text-text-secondary hover:text-text-primary{% endif %}">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
          </svg>
          {% translate "Details" %}
        </a>
        <a href="?tab=seo" class="flex-shrink-0 inline-flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium transition-all duration-200 {% if active_tab == 'seo' %}bg-primary text-white{% else %}bg-surface-light text-text-secondary hover:text-text-primary{% endif %}">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
          </svg>
          {% translate "SEO" %}
        </a>
        <a href="?tab=pricing" class="flex-shrink-0 inline-flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium transition-all duration-200 {% if active_tab == 'pricing' %}bg-primary text-white{% else %}bg-surface-light text-text-secondary hover:text-text-primary{% endif %}">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
          </svg>
          {% translate "Pricing" %}
        </a>
        <a href="?tab=pages" class="flex-shrink-0 inline-flex items-center gap-2 px-4 py-2 rounded-full text-sm font-medium transition-all duration-200 {% if active_tab == 'pages' %}bg-primary text-white{% else %}bg-surface-light text-text-secondary hover:text-text-primary{% endif %}">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
          </svg>
          {% translate "Pages" %}
          <span class="bg-surface-darker text-text-muted text-xs px-1.5 py-0.5 rounded-full">{{ pages.count }}</span>
        </a>
      </div>
    </div>

    <!-- Content Area -->
    <main class="flex-1 overflow-y-auto bg-surface-darker">
      <div class="p-4 lg:p-6 max-w-4xl">
        <!-- Details Tab Content -->
        {% if active_tab == 'details' %}
        <div class="space-y-6">
          <div class="flex items-center justify-between">
            <h2 class="text-xl font-bold text-text-primary">{% translate "Article Details" %}</h2>
          </div>

          <form id="details-form" class="dashboard-card space-y-6">
            <!-- Title -->
            <div class="form-group">
              <label for="details-title" class="form-label">{% translate "Title" %} <span class="text-red-500">*</span></label>
              <input type="text" name="title" id="details-title" value="{{ article.title }}" class="dashboard-input w-full" required>
              <p class="text-red-500 text-xs mt-1 hidden" id="details-title-error"></p>
            </div>

            <!-- Language -->
            <div class="form-group">
              <label for="details-language" class="form-label">{% translate "Language" %}</label>
              <select name="language" id="details-language" class="dashboard-select w-full">
                {% for value, label in details_form.fields.language.choices %}
                <option value="{{ value }}" {% if article.language == value %}selected{% endif %}>{{ label }}</option>
                {% endfor %}
              </select>
            </div>

            <!-- Summary -->
            <div class="form-group">
              <label for="details-summary" class="form-label">{% translate "Summary" %}</label>
              <textarea name="summary" id="details-summary" rows="4" class="dashboard-textarea w-full" placeholder="{% translate 'Brief article summary...' %}">{{ article.summary }}</textarea>
            </div>

            <!-- Difficulty -->
            <div class="form-group">
              <label for="details-difficulty" class="form-label">{% translate "Difficulty" %}</label>
              <select name="difficulty" id="details-difficulty" class="dashboard-select w-full">
                {% for value, label in details_form.fields.difficulty.choices %}
                <option value="{{ value }}" {% if article.difficulty == value %}selected{% endif %}>{{ label }}</option>
                {% endfor %}
              </select>
            </div>

            <!-- Status -->
            <div class="form-group">
              <label for="details-status" class="form-label">{% translate "Status" %}</label>
              <select name="status" id="details-status" class="dashboard-select w-full">
                {% for value, label in details_form.fields.status.choices %}
                <option value="{{ value }}" {% if article.status == value %}selected{% endif %}>{{ label }}</option>
                {% endfor %}
              </select>
            </div>

            <!-- Submit Button -->
            <div class="flex justify-end pt-4 border-t border-border-dark">
              <button type="submit" class="btn-primary" id="save-details-btn">
                <span id="save-details-text">{% translate "Save Changes" %}</span>
                <span id="save-details-loader" class="hidden">
                  <svg class="animate-spin h-5 w-5 text-white inline-block" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                  </svg>
                  {% translate "Saving..." %}
                </span>
              </button>
            </div>
          </form>
        </div>
        {% endif %}

        <!-- SEO Tab Content -->
        {% if active_tab == 'seo' %}
        <div class="space-y-6">
          <div class="flex items-center justify-between">
            <h2 class="text-xl font-bold text-text-primary">{% translate "SEO Settings" %}</h2>
          </div>

          <form id="seo-form" class="dashboard-card space-y-6">
            <!-- SEO Title -->
            <div class="form-group">
              <label for="seo-title" class="form-label">{% translate "SEO Title" %}</label>
              <input type="text" name="seo_title" id="seo-title" value="{{ article.seo_title }}" maxlength="70" class="dashboard-input w-full" placeholder="{% translate 'Meta title for search engines (max 70 characters)' %}">
              <p class="text-text-muted text-xs mt-1"><span id="seo-title-count">{{ article.seo_title|length }}</span>/70 {% translate "characters" %}</p>
            </div>

            <!-- SEO Description -->
            <div class="form-group">
              <label for="seo-description" class="form-label">{% translate "SEO Description" %}</label>
              <textarea name="seo_description" id="seo-description" rows="3" maxlength="160" class="dashboard-textarea w-full" placeholder="{% translate 'Meta description for search engines (max 160 characters)' %}">{{ article.seo_description }}</textarea>
              <p class="text-text-muted text-xs mt-1"><span id="seo-desc-count">{{ article.seo_description|length }}</span>/160 {% translate "characters" %}</p>
            </div>

            <!-- Canonical URL -->
            <div class="form-group">
              <label for="seo-canonical" class="form-label">{% translate "Canonical URL" %}</label>
              <input type="url" name="canonical_url" id="seo-canonical" value="{{ article.canonical_url }}" class="dashboard-input w-full" placeholder="https://example.com/article">
            </div>

            <!-- Cover Image Key -->
            <div class="form-group">
              <label for="seo-cover-key" class="form-label">{% translate "Cover Image" %}</label>
              <input type="text" name="cover_image_key" id="seo-cover-key" value="{{ article.cover_image_key }}" class="dashboard-input w-full" placeholder="{% translate 'S3 key/path for cover image' %}">
            </div>

            <!-- Cover Alt Text -->
            <div class="form-group">
              <label for="seo-cover-alt" class="form-label">{% translate "Cover Alt Text" %}</label>
              <input type="text" name="cover_alt_text" id="seo-cover-alt" value="{{ article.cover_alt_text }}" class="dashboard-input w-full" placeholder="{% translate 'Descriptive text for the cover image' %}">
            </div>

            <!-- Submit Button -->
            <div class="flex justify-end pt-4 border-t border-border-dark">
              <button type="submit" class="btn-primary" id="save-seo-btn">
                <span id="save-seo-text">{% translate "Save Changes" %}</span>
                <span id="save-seo-loader" class="hidden">
                  <svg class="animate-spin h-5 w-5 text-white inline-block" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                  </svg>
                  {% translate "Saving..." %}
                </span>
              </button>
            </div>
          </form>
        </div>
        {% endif %}

        <!-- Pricing Tab Content -->
        {% if active_tab == 'pricing' %}
        <div class="space-y-6">
          <div class="flex items-center justify-between">
            <h2 class="text-xl font-bold text-text-primary">{% translate "Pricing Settings" %}</h2>
          </div>

          <form id="pricing-form" class="dashboard-card space-y-6">
            <!-- Access Type -->
            <div class="form-group">
              <label for="pricing-access" class="form-label">{% translate "Access Type" %}</label>
              <select name="access_type" id="pricing-access" class="dashboard-select w-full">
                {% for value, label in pricing_form.fields.access_type.choices %}
                <option value="{{ value }}" {% if article.access_type == value %}selected{% endif %}>{{ label }}</option>
                {% endfor %}
              </select>
            </div>

            <!-- Price (shown only for paid) -->
            <div class="form-group" id="price-group">
              <label for="pricing-price" class="form-label">{% translate "Price" %}</label>
              <div class="flex gap-3">
                <input type="number" name="price" id="pricing-price" value="{{ article.price|default_if_none:'' }}" step="0.01" min="0" class="dashboard-input flex-1" placeholder="0.00">
                <select name="currency" id="pricing-currency" class="dashboard-select w-32">
                  <option value="USD" {% if article.currency == 'USD' %}selected{% endif %}>USD</option>
                  <option value="EUR" {% if article.currency == 'EUR' %}selected{% endif %}>EUR</option>
                  <option value="GBP" {% if article.currency == 'GBP' %}selected{% endif %}>GBP</option>
                  <option value="XAF" {% if article.currency == 'XAF' %}selected{% endif %}>XAF</option>
                </select>
              </div>
              <p class="text-red-500 text-xs mt-1 hidden" id="pricing-price-error"></p>
            </div>

            <!-- Submit Button -->
            <div class="flex justify-end pt-4 border-t border-border-dark">
              <button type="submit" class="btn-primary" id="save-pricing-btn">
                <span id="save-pricing-text">{% translate "Save Changes" %}</span>
                <span id="save-pricing-loader" class="hidden">
                  <svg class="animate-spin h-5 w-5 text-white inline-block" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                    <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                    <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                  </svg>
                  {% translate "Saving..." %}
                </span>
              </button>
            </div>
          </form>
        </div>
        {% endif %}

        <!-- Pages Tab Content -->
        {% if active_tab == 'pages' %}
        <div class="space-y-6">
          <div class="flex items-center justify-between">
            <h2 class="text-xl font-bold text-text-primary">{% translate "Article Pages" %}</h2>
            <button type="button" class="btn-primary inline-flex items-center gap-2" id="add-page-btn">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
              </svg>
              {% translate "Add Page" %}
            </button>
          </div>

          {% if pages %}
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            {% for page in pages %}
            <div class="dashboard-card hover:border-primary/50 transition-all duration-300">
              <div class="flex items-start justify-between mb-3">
                <div class="flex items-center gap-3">
                  <span class="w-8 h-8 rounded-lg bg-primary/10 text-primary flex items-center justify-center text-sm font-bold">{{ page.page_number }}</span>
                  <div>
                    <h3 class="text-text-primary font-medium">{{ page.title|default:"Untitled Page" }}</h3>
                    <p class="text-text-muted text-xs">{% translate "Page" %} {{ page.page_number }}</p>
                  </div>
                </div>
                <div class="flex items-center gap-1">
                  <button type="button" class="p-2 rounded-lg text-text-secondary hover:text-primary hover:bg-surface-light transition-colors" title="{% translate 'Edit' %}">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path>
                    </svg>
                  </button>
                  <button type="button" class="p-2 rounded-lg text-text-secondary hover:text-red-500 hover:bg-red-500/10 transition-colors" title="{% translate 'Delete' %}">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                    </svg>
                  </button>
                </div>
              </div>
              <!-- Content Preview -->
              <div class="bg-surface-light rounded-lg p-3 max-h-32 overflow-hidden">
                <div class="text-text-secondary text-sm prose prose-sm prose-invert max-w-none line-clamp-4">
                  {{ page.content|truncatechars:200|linebreaksbr }}
                </div>
              </div>
            </div>
            {% endfor %}
          </div>
          {% else %}
          <!-- Empty State -->
          <div class="dashboard-card text-center py-12">
            <div class="w-16 h-16 mx-auto mb-4 rounded-full bg-surface-light flex items-center justify-center">
              <svg class="w-8 h-8 text-text-muted" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
              </svg>
            </div>
            <h3 class="text-text-primary font-medium mb-1">{% translate "No pages yet" %}</h3>
            <p class="text-text-muted text-sm mb-4">{% translate "Start by adding your first page to this article." %}</p>
            <button type="button" class="btn-primary inline-flex items-center gap-2" id="add-page-empty-btn">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"></path>
              </svg>
              {% translate "Add Page" %}
            </button>
          </div>
          {% endif %}
        </div>
        {% endif %}
      </div>
    </main>
  </div>
</div>

{% include "tech-articles/dashboard/includes/_js.html" %}
<script src="{% static 'js/content/articles/article-dashboard-manager.js' %}"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Initialize the article dashboard manager
    window.articleDashboardManager = new ArticleDashboardManager({
        articleId: "{{ article.pk }}",
        detailsUrl: "{% url 'content:articles_api_details' pk=article.pk %}",
        seoUrl: "{% url 'content:articles_api_seo' pk=article.pk %}",
        pricingUrl: "{% url 'content:articles_api_pricing' pk=article.pk %}",
        csrfToken: "{{ csrf_token }}",
    });
});
</script>
</body>
</html>

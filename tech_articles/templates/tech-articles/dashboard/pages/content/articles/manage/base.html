{% extends 'tech-articles/dashboard/pages/content/articles/manage/base_blank.html' %}
{% load i18n %}


{% block main %}
  <main id="main-content" class="bg-surface-darker h-screen overflow-y-auto">
    <div class="p-4 mx-auto md:p-6 w-full">
      <!-- Header with Title + Status + Actions -->
      <div class="mb-6 flex flex-wrap items-center justify-between gap-3">
        <div class="flex flex-row gap-4 items-center">
          <h2 class="text-xl md:text-2xl font-semibold text-text-primary"
              id="article-title-header">{{ article.title|truncatechars:50 }}</h2>
          {% if article.status == 'published' %}
            <span
              data-status-badge
              class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-500/20 text-green-400 border border-green-500/30">
              {% translate "Published" %}
            </span>
          {% elif article.status == 'draft' %}
            <span
              data-status-badge
              class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-500/20 text-yellow-400 border border-yellow-500/30">
              {% translate "Draft" %}
            </span>
          {% elif article.status == 'scheduled' %}
            <span
              data-status-badge
              class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-500/20 text-blue-400 border border-blue-500/30">
              {% translate "Scheduled" %}
            </span>
          {% else %}
            <span
              data-status-badge
              class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-500/20 text-gray-400 border border-gray-500/30">
              {% translate "Archived" %}
            </span>
          {% endif %}
        </div>
        <!-- Action Buttons -->
        <div class="flex items-center gap-2">
          {% block header_actions %}
            <button
              class="btn-primary px-4 py-2 text-xs md:text-sm font-medium rounded-lg transition-colors"
              data-article-link="{% url 'content:articles_api_publish' article.pk %}"
              aria-label="{% translate 'Publish article' %}">
              {% translate 'Publish Article' %}
            </button>
          {% endblock %}
        </div>
      </div>

      <!-- Tabs + Content Layout -->
      <div class="flex flex-col md:flex-row mt-10">
        <!-- Left Sidebar (Tabs) -->
        <div class="w-full flex flex-row flex-wrap gap-2 md:flex-col md:w-64 md:gap-0">
          <ul class="flex flex-row flex-wrap gap-2 md:flex-col md:gap-0 w-full">
            <!-- Article Details Tab -->
            <li class="mb-2 max-w-md md:w-auto">
              {% url 'content:article_manage_details' pk=article.pk as details_url %}
              <a href="{{ details_url }}"
                 class="block w-full text-left font-medium rounded-lg p-3 text-xs md:text-sm cursor-pointer transition-colors {% if request.resolver_match.url_name == 'article_manage_details' %}bg-primary/20 text-primary{% else %}text-text-secondary hover:bg-surface-light hover:text-text-primary{% endif %}">
                {% translate "Article Details" %}
              </a>
            </li>

            <!-- SEO Tab -->
            <li class="mb-2 max-w-md md:w-auto">
              {% url 'content:article_manage_seo' pk=article.pk as seo_url %}
              <a href="{{ seo_url }}"
                 class="block w-full text-left font-medium rounded-lg p-3 text-xs md:text-sm cursor-pointer transition-colors {% if request.resolver_match.url_name == 'article_manage_seo' %}bg-primary/20 text-primary{% else %}text-text-secondary hover:bg-surface-light hover:text-text-primary{% endif %}">
                {% translate "SEO" %}
              </a>
            </li>

            <!-- Pricing Tab -->
            <li class="mb-2 max-w-md md:w-auto">
              {% url 'content:article_manage_pricing' pk=article.pk as pricing_url %}
              <a href="{{ pricing_url }}"
                 class="block w-full text-left font-medium rounded-lg p-3 text-xs md:text-sm cursor-pointer transition-colors {% if request.resolver_match.url_name == 'article_manage_pricing' %}bg-primary/20 text-primary{% else %}text-text-secondary hover:bg-surface-light hover:text-text-primary{% endif %}">
                {% translate "Pricing" %}
              </a>
            </li>

            <!-- Preview Tab -->
            <li class="mb-2 max-w-md md:w-auto">
              {% url 'content:article_manage_preview' pk=article.pk as preview_url %}
              <a href="{{ preview_url }}"
                 class="block w-full text-left font-medium rounded-lg p-3 text-xs md:text-sm cursor-pointer transition-colors {% if request.resolver_match.url_name == 'article_manage_preview' %}bg-primary/20 text-primary{% else %}text-text-secondary hover:bg-surface-light hover:text-text-primary{% endif %}">
                {% translate "Preview" %}
              </a>
            </li>

            <!-- Content/Pages Tab -->
            <li class="mb-2 max-w-md md:w-auto group">
              {% url 'content:article_manage_content' pk=article.pk as content_url %}
              <a href="{{ content_url }}"
                 class="w-full text-left font-medium rounded-lg p-3 text-xs md:text-sm cursor-pointer transition-colors flex items-center justify-between {% if request.resolver_match.url_name == 'article_manage_content' %}bg-primary/20 text-primary{% else %}text-text-secondary hover:bg-surface-light hover:text-text-primary{% endif %}">
                <span>{% translate "Content" %}</span>
                <span
                  class="ml-2 {% if request.resolver_match.url_name == 'article_manage_content' %}bg-primary/30 text-primary{% else %} bg-surface-light/90 text-text-primary{% endif %} text-xs px-2 py-1 font-semibold rounded-full transition-colors group-hover:bg-primary/30 group-hover:text-primary">{{ pages_count|default:0 }}</span>
              </a>
            </li>

            <!-- TOC Tab -->
            <li class="mb-2 max-w-md md:w-auto">
              {% url 'content:article_manage_toc' pk=article.pk as toc_url %}
              <a href="{{ toc_url }}"
                 class="block w-full text-left font-medium rounded-lg p-3 text-xs md:text-sm cursor-pointer transition-colors {% if request.resolver_match.url_name == 'article_manage_toc' %}bg-primary/20 text-primary{% else %}text-text-secondary hover:bg-surface-light hover:text-text-primary{% endif %}">
                {% translate "Table of Contents" %}
              </a>
            </li>
          </ul>
        </div>

        <!-- Dynamic Content Area -->
        <div class="flex-1 mt-4 md:mt-0 md:pl-4">
          <div id="content" class="bg-surface-dark p-6 rounded-xl border border-border-dark">
            {% block content %}{% endblock %}
          </div>
        </div>
      </div>
    </div>
  </main>
{% endblock %}
